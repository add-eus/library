# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the master branch
name: Update repositories

on:
    push:
        branches:
            - master

concurrency:
    group: ${{ github.ref }}
    cancel-in-progress: true

jobs:
    update-repositories:
        name: Update repositories
        runs-on: ubuntu-latest
        steps:
            - uses: actions/github-script@v6
              with:
                  github-token: ${{ secrets.GH_TOKEN }}
                  script: |
                      await github.rest.actions.createWorkflowDispatch({
                          owner: 'track2max',
                          repo: 'application',
                          workflow_id: 'on-library-updated.yml',
                          ref: 'master',
                      })
                      await github.rest.actions.createWorkflowDispatch({
                          owner: 'add-eus',
                          repo: 'application',
                          workflow_id: 'on-library-updated.yml',
                          ref: 'master',
                      })
